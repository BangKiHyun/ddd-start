# 인프라스트럭처 및 모듈 구성

## 인프라스트럭처 개요

도메인 영역과 응용 영역에서 인프라스트럭처 기능을 직접 사용하는 것보다 이 두 영역에 정의한 인터페이스를 인프라스트러처 영역에서 구현하는 것이 시스템을 더 유연하고 테스트 쉽게 만들어준다.

</br >

## 무조건 인프라스트럭처에 대한 의존을 없애는 것은 좋지 않다

DIP의 장점을 해치지 않는 범위에서 응용 영역과 도메인 영역에서 구현 기술에 대한 의존을 가지는 것이 편리하다.

- 스프링을 사용할 경우 응용 서비스는 트랜잭션 처리를 위해 `@Transaction`을 사용하는 것이 편리하다.
- 영속성 처리르 위해 JPA를 사용할 경우 `@Entity`나 `@Table`과 같은 JPA 전용 애너테에션을 도메인 모델 클래스에 사용하는 것이 XML 매핑 설정보다 편리하다.

</br >

## 모듈 구성

아키텍처의 각 영역은 별도 패키지에 위치한다.

### 영역별 패키지로 구성한 모듈 구조

- com.myshop.ui
- com.myshop.application
- com.myshop.domain
- com.myshop.infrastructure

</br >

### 도메인이 크면 하위 도메인으로 나누고 각 하위 도메인마다 별도 패키지를 구성하자

![image](https://user-images.githubusercontent.com/43977617/100902798-9625c400-3508-11eb-98c1-0b2214ffc4f5.png)

</br >

### 도메인 모듈은 도메인에 속한 애그리거트를 기준으로 다시 패키지를 구성하자

![image](https://user-images.githubusercontent.com/43977617/100902798-9625c400-3508-11eb-98c1-0b2214ffc4f5.png)

</br >

## 마지막으로

모듈 구조를 얼마나 세분화해야 하는지에 대해 정해진 규칙은 없다. 다만 **한 패키지에 타입 개수가 10개 이상이면 모듈을 분리하는 것을 고려해보자.**

